### **Методика сравнения цветов камеры с эталонной таблицей (Color Checker)**  

Эталонные цветовые таблицы (например, **X-Rite ColorChecker Classic**, **Datacolor SpyderCheckr**) содержат заранее известные цветовые патчи с измеренными спектральными характеристиками. Сравнение фотографии такой таблицы с эталонными значениями позволяет оценить:  
- **Цветовой охват камеры** (какие оттенки она может захватить).  
- **Точность цветопередачи** (насколько цвета соответствуют реальности).  
- **Баланс белого и контрастность**.  

---

## **1. Подготовка оборудования и условий съёмки**  
### **Необходимые материалы:**  
- Эталонная таблица (например, **X-Rite ColorChecker Classic**, **DGK Color Tools**, **SpyderCheckr 24**).  
- Камера, которую тестируем (желательно в RAW-формате для максимального охвата).  
- Стабильный источник света (дневной свет или профессиональные лампы с CRI > 90).  
- Штатив (чтобы избежать смазов и изменений освещения).  
- Программное обеспечение для анализа (Adobe Photoshop, Lightroom, Imatest, RawDigger, Darktable).  

### **Условия съёмки:**  
- Освещение должно быть **равномерным** (без бликов и теней на таблице).  
- Лучше использовать **рассеянный свет** (окно в пасмурный день или софтбокс).  
- Баланс белого можно выставить **по серой карте** (если она есть в таблице).  
- Снимайте в **RAW**, чтобы избежать сжатия JPEG.  

---

## **2. Процесс фотографирования таблицы**  
1. **Закрепите таблицу** на ровной поверхности без бликов.  
2. **Установите камеру** на штатив под прямым углом к таблице (чтобы избежать искажений).  
3. **Настройте экспозицию** так, чтобы:  
   - Ни один из цветов не был пересвечен (проверьте гистограмму).  
   - Тени не "проваливались" в шумы.  
4. **Сделайте несколько снимков** (для статистики).  

---

## **3. Обработка и анализ в ПО**  
### **Вариант 1: Ручной анализ (Photoshop/Lightroom)**  
1. Откройте RAW-файл в **Adobe Lightroom** или **Camera Raw**.  
2. **Установите баланс белого** по серому полю (если есть).  
3. **Экспортируйте** изображение в TIFF (без коррекций).  
4. В **Photoshop** используйте инструмент **Пипетка (Eyedropper Tool)** для измерения значений RGB каждого патча.  
5. Сравните полученные значения с **эталонными данными** (можно найти в спецификациях таблицы).  

### **Вариант 2: Автоматизированный анализ (Imatest, RawDigger, Darktable)**  
1. **Imatest** (платный, но точный):  
   - Загрузите фото таблицы.  
   - Программа автоматически сравнит цвета с эталоном и выдаст **график ошибок (Delta E)**.  
   - **Delta E < 2** – отличная передача, **Delta E > 5** – заметные отклонения.  
2. **RawDigger** (анализ RAW-данных):  
   - Показывает, какие цвета были обрезаны (клиппинг).  
   - Можно построить цветовую диаграмму в сравнении с sRGB/Adobe RGB.  
3. **Darktable** (бесплатный аналог Lightroom):  
   - Есть модуль **Colorchecker**, который автоматически корректирует цвета под эталон.  

---

## **4. Интерпретация результатов**  
### **А) Цветовой охват (Gamut)**  
- Постройте **график в координатах CIE xy** (например, в **Adobe Color Picker**).  
- Сравните с sRGB/Adobe RGB – если часть цветов выходит за границы, значит камера захватывает более широкий диапазон.  

### **Б) Точность цветопередачи (Delta E)**  
- **Delta E < 1** – незаметно глазу.  
- **Delta E 2–5** – небольшие отклонения.  
- **Delta E > 5** – явные искажения.  

### **В) Проблемные зоны**  
- Если **красные/синие** оттенки сильно отклоняются – возможен **баланс белого**.  
- Если **нейтральные серые** имеют цветной оттенок – проблема с **калибровкой матрицы**.  
- Если **насыщенные цвета** "слипаются" – камера не различает тонкие оттенки.  

---

### **Вывод:**  
Эта методика позволяет точно определить:  
- **Какие цвета камера передаёт хорошо, а какие искажает.**  
- **Насколько её цветовой охват соответствует sRGB/Adobe RGB.**  
- **Нужна ли дополнительная коррекция в постобработке.**  

Для максимальной точности лучше использовать **RAW + автоматизированные инструменты (Imatest, Darktable)**.

Вот Python-код для анализа цветов камеры по фотографии эталонной таблицы (например, **X-Rite ColorChecker**). Мы будем использовать **OpenCV** и **scikit-image** для обработки изображения и вычисления цветовых отклонений (**Delta E**).

---

### **Инструкция**  

### **1. Как это работает?**
1. **Эталонные цвета**  
   - Используются стандартные значения **X-Rite ColorChecker Classic** в sRGB.
2. **Извлечение цветов с фото**  
   - Изображение разбивается на сетку 4×6 (стандартный ColorChecker), и для каждого патча вычисляется средний цвет.
3. **Расчёт Delta E (CIEDE2000)**  
   - Метрика **Delta E** показывает, насколько цвет отличается от эталона (чем меньше, тем лучше).
4. **Визуализация**  
   - Строится график ошибок для каждого патча.

---

### **2. Интерпретация результатов**
- **ΔE < 1** – почти незаметно глазу.  
- **ΔE 1–2** – минимальные отклонения.  
- **ΔE 2–5** – заметно при сравнении.  
- **ΔE > 5** – сильное искажение.  
