# Оценка бликов на изображении с использованием алгоритма Otсу и карты резкости

## Описание

Данный скрипт реализует методику автоматического определения бликов на изображении, полученном с цифровой камеры. Цель алгоритма — определить области изображения, которые можно считать бликами, то есть яркие участки с низкой текстурой, где камера не смогла сохранить тональные переходы и детали.

---

## Методология

Алгоритм сочетает в себе:

1. **Пороговую сегментацию по методу Отсу**, позволяющую автоматически выделить **яркие области** на изображении.
2. **Карту детализации**, построенную с помощью оператора Лапласа, чтобы определить **участки с низкой текстурой** (т.е. без деталей).
3. Области считаются **бликами**, если они одновременно:

   * очень **яркие** (выше порога по Отсу),
   * и имеют **низкую резкость/детализацию** (значения Лапласа ниже заданного порога).

Такой подход основан на предположении, что **блики — это яркие, но недетализированные области**, часто возникающие из-за переотражения света или ограничений сенсора камеры.

---

## Интерпретация результатов

После анализа выводится:

* автоматический **порог яркости** (по методу Отсу),
* **процент площади**, занятый бликами,
* и **качественная оценка**, основанная на эмпирических диапазонах:

| Процент бликов | Интерпретация                    |
| -------------- | -------------------------------- |
| < 1%           | Бликов практически нет           |
| 1–5%           | Незначительные блики             |
| 5–15%          | Умеренные блики                  |
| > 15%          | Сильная засветка, блики критичны |

---

## Использование

1. Убедитесь, что у вас установлены зависимости:

```bash
pip install opencv-python numpy
```
2. Поместите изображение, снятое вашей камерой, в директорию скрипта.

3. Запустите скрипт:

```bash
python glare_detector.py
```

4. Визуализация:

   * Окно с исходным изображением.
   * Маска бликов (белые участки — засветки).
   * В консоль выводятся результаты расчёта.

---

## Структура проекта

```
.
├── glare_detector.py       # Основной скрипт
├── bliki.jpg               # Пример изображения (тестовая таблица)
└── README.md               # Описание
```

---

## Источники

* ISO 18844:2017 Photography — Digital cameras — Image flare measurement
* OpenCV Documentation: [https://docs.opencv.org/](https://docs.opencv.org/)
* Otsu’s Method (Thresholding): [https://en.wikipedia.org/wiki/Otsu%27s\_method](https://en.wikipedia.org/wiki/Otsu%27s_method)
